import{o as l,c as d,d as v,a as s,t as f,r as g,w as A,b as x,v as S,e as B,f as M,g as P,h as N,u as r,i as u,j as h,p as O,k as E,l as p,m as R,F as I,n as T,q as b,R as m,s as q,x as j,y as F}from"./vendor.7fdfec82.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};H();const W="modulepreload",C={},D="/",J=function(t,n){return!n||n.length===0?t():Promise.all(n.map(e=>{if(e=`${D}${e}`,e in C)return;C[e]=!0;const o=e.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${c}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":W,o||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),o)return new Promise((_,V)=>{i.addEventListener("load",_),i.addEventListener("error",V)})})).then(()=>t())};var w=(a,t)=>{const n=a.__vccOpts||a;for(const[e,o]of t)n[e]=o;return n};const z={},K={class:"section"};function G(a,t){return l(),d("div",K)}var Q=w(z,[["render",G]]);const X={class:"section"},Y={class:"title"},y=v({props:{title:{type:String,default:" Hello World"}},setup(a){return(t,n)=>(l(),d("div",X,[s("h1",Y,f(a.title),1)]))}}),Z={class:"section"},ss={class:"columns"},ts={class:"column is-half is-offset-one-quarter"},es={class:"card"},os=s("h1",{class:"title"},"Login Page",-1),ns={class:"field"},as={class:"control has-icons-left has-icons-right"},is=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-envelope"})],-1),cs=s("span",{class:"icon is-small is-right"},[s("i",{class:"fas fa-check"})],-1),rs={class:"field"},ls={class:"control has-icons-left"},ds=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-lock"})],-1),us=s("div",{class:"field"},[s("p",{class:"control"},[s("button",{class:"button is-success"}," Login ")])],-1),_s=v({setup(a){const t=k(),n=g(""),e=g("");function o(){t.Login(n.value,e.value)}return(c,i)=>(l(),d("div",Z,[s("div",ss,[s("div",ts,[s("div",es,[s("form",{class:"card-content",onSubmit:i[2]||(i[2]=A(_=>o(),["prevent"]))},[os,s("div",ns,[s("p",as,[x(s("input",{class:"input",type:"email",placeholder:"Email","onUpdate:modelValue":i[0]||(i[0]=_=>n.value=_)},null,512),[[S,n.value]]),is,cs])]),s("div",rs,[s("p",ls,[x(s("input",{class:"input",type:"password",placeholder:"Password","onUpdate:modelValue":i[1]||(i[1]=_=>e.value=_)},null,512),[[S,e.value]]),ds])]),us],32)])])])]))}}),ps=[{path:"/",component:Q},{path:"/about",component:y,props:{title:"About Page!"}},{path:"/contact",component:y,props:{title:"Contact Page!"}},{path:"/signup",component:y,props:{title:"SignUp Page!"}},{path:"/login",component:_s},{path:"/messages",component:()=>J(()=>import("./Wall.446ac6d1.js"),["assets/Wall.446ac6d1.js","assets/Wall.a0b51b7e.css","assets/vendor.7fdfec82.js"])}],$=B({history:M(),routes:ps,linkActiveClass:"is-active"});$.beforeEach((a,t)=>{const n=k();n.destinationUrl==null&&a.path!="/login"&&(n.destinationUrl=a.path),console.log({to:a});const e=["/messages","/wall","/feed","/hidden"];if(console.log({protectedUrls:e}),e.includes(a.path)&&(console.log("requires login"),!n.user))return"/login"});const hs="http://localhost:3001/api/";function fs(a,t,n,e){return t&&(n!=null,JSON.stringify(t)),fetch(hs+a).then(o=>o.json())}const U=P("messages",{state:()=>({notifications:[]}),actions:{close(a){this.notifications.splice(a,1)}}}),k=P("session",{state:()=>({user:null,destinationUrl:null}),actions:{async Login(a,t){const n=U();try{const e=await fs("users/login",{email:a,password:t});n.notifications.push({type:"success",message:`Welcome ${e.firstName}`}),this.user=e,$.push("/messages")}catch(e){n.notifications.push({type:"error",message:e.message}),console.table(n.notifications)}},Logout(){this.user=null,$.push("/login")}}});const L=a=>(O("data-v-1e9f87f4"),a=a(),E(),a),vs={key:0,class:"buttons"},ms=L(()=>s("strong",null,"Sign up",-1)),gs=p(" Log in "),bs={key:1,class:"buttons"},$s={class:"avatar"},ys=["src"],ws=p(),ks=L(()=>s("br",null,null,-1)),Ls=L(()=>s("strong",null,"Log out",-1)),xs=[Ls],Ss=v({setup(a){const t=k();return(n,e)=>{const o=N("router-link");return r(t).user?(l(),d("div",bs,[s("div",$s,[s("img",{src:r(t).user.pic},null,8,ys),s("div",null,[s("strong",null,f(r(t).user.firstName)+" "+f(r(t).user.lastName),1),ws,ks,s("i",null,f(r(t).user.email),1)])]),s("a",{class:"button is-primary",onClick:e[0]||(e[0]=c=>r(t).Logout())},xs)])):(l(),d("div",vs,[u(o,{class:"button is-primary",to:"/signup"},{default:h(()=>[ms]),_:1}),u(o,{class:"button is-light",to:"/login"},{default:h(()=>[gs]),_:1})]))}}});var Cs=w(Ss,[["__scopeId","data-v-1e9f87f4"]]);const Ps=a=>(O("data-v-31275f70"),a=a(),E(),a),Ns=Ps(()=>s("span",{class:"icon"},[s("i",{class:"fas fa-bell"})],-1)),Os={key:0,class:"tag is-danger"},Es={class:"navbar-dropdown"},Is=["onClick"],Us=v({setup(a){const t=U(),n=g(!1);return(e,o)=>(l(),d("div",{class:b(["navbar-item has-dropdown",{"is-active":n.value}])},[s("a",{class:"navbar-link",onClick:o[0]||(o[0]=c=>n.value=!n.value)},[Ns,r(t).notifications.length?(l(),d("span",Os,f(r(t).notifications.length),1)):R("",!0)]),s("div",Es,[(l(!0),d(I,null,T(r(t).notifications,(c,i)=>(l(),d("div",{class:b(`notification is-light is-${c.type}`)},[s("button",{class:"delete",onClick:_=>r(t).close(i)},null,8,Is),p(" "+f(c.message),1)],2))),256))])],2))}});var Vs=w(Us,[["__scopeId","data-v-31275f70"]]);const As={class:"navbar is-info",role:"navigation","aria-label":"main navigation"},Bs={class:"container"},Ms={class:"navbar-brand"},Rs=s("a",{class:"navbar-item",href:"https://bulma.io"},[s("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),Ts=s("span",{"aria-hidden":"true"},null,-1),qs=s("span",{"aria-hidden":"true"},null,-1),js=s("span",{"aria-hidden":"true"},null,-1),Fs=[Ts,qs,js],Hs={class:"navbar-start"},Ws=p(" Home "),Ds=p(" Messages "),Js={class:"navbar-item has-dropdown is-hoverable"},zs=s("a",{class:"navbar-link"}," More ",-1),Ks={class:"navbar-dropdown"},Gs=p(" About "),Qs=s("a",{class:"navbar-item"}," Jobs ",-1),Xs=p(" Contact "),Ys=s("hr",{class:"navbar-divider"},null,-1),Zs=s("a",{class:"navbar-item"}," Report an issue ",-1),st={class:"navbar-end"},tt={class:"navbar-item"},et=q('<div class="navbar-item"><div class="field is-grouped"><p class="control"><a class="bd-tw-button button" data-social-network="Twitter" data-social-action="tweet" data-social-target="https://bulma.io" target="_blank" href="https://twitter.com/intent/tweet?text=Bulma: a modern CSS framework based on Flexbox&amp;hashtags=bulmaio&amp;url=https://bulma.io&amp;via=jgthms"><span class="icon"><i class="fab fa-twitter"></i></span><span> Tweet </span></a></p></div></div>',1),ot=v({setup(a){const t=g(!1);return(n,e)=>(l(),d("nav",As,[s("div",Bs,[s("div",Ms,[Rs,s("a",{role:"button",class:b(["navbar-burger",{"is-active":t.value}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:e[0]||(e[0]=o=>t.value=!t.value)},Fs,2)]),s("div",{class:b(["navbar-menu",{"is-active":t.value}])},[s("div",Hs,[u(r(m),{class:"navbar-item",to:"/"},{default:h(()=>[Ws]),_:1}),u(r(m),{class:"navbar-item",to:"/messages"},{default:h(()=>[Ds]),_:1}),s("div",Js,[zs,s("div",Ks,[u(r(m),{class:"navbar-item",to:"/about"},{default:h(()=>[Gs]),_:1}),Qs,u(r(m),{class:"navbar-item",to:"/contact"},{default:h(()=>[Xs]),_:1}),Ys,Zs])])]),s("div",st,[s("div",tt,[u(Cs)]),u(Vs),et])],2)])]))}}),nt={class:"container"},at={setup(a){return(t,n)=>{const e=N("router-view");return l(),d(I,null,[u(ot),s("div",nt,[u(e)])],64)}}};j(at).use($).use(F()).mount("#app");export{fs as a};
